import{B as m,c as r,a as e,d as $,t as d,j as n,e as J,E as W,T as X,z as Y,o as a,h as x,F as g,p as u,q as Z}from"./index-B1RxePN7.js";import{u as ee}from"./customers-DVU7Vi3h.js";import{g as te,C as se}from"./constants-CFvVWKro.js";const re={class:"space-y-6"},de={class:"flex flex-col gap-4 rounded-2xl border border-gray-100 bg-white/80 p-4 shadow-sm md:flex-row md:items-center md:justify-between md:p-6"},ae={class:"space-y-2"},oe={class:"text-2xl font-extrabold text-gray-900 md:text-3xl"},le={class:"text-sm text-gray-600 md:text-base"},ie={class:"flex flex-wrap items-center gap-2 sm:gap-3 md:justify-end"},ne={key:0,class:"inline-flex items-center rounded-xl border border-gray-200 bg-gray-50 px-3 py-1 text-xs font-medium text-gray-600"},ce={key:"details-loading",class:"space-y-6"},xe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4"},ge={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},ue={class:"animate-pulse space-y-3 rounded-2xl border border-gray-100 bg-white/80 p-5"},me={key:"details-content",class:"space-y-6"},pe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4"},be={class:"rounded-2xl border border-gray-100 bg-gradient-to-br from-white to-gray-50 p-5 shadow-sm"},ye={class:"mt-3 text-3xl font-extrabold text-gray-900 md:text-4xl"},he={class:"rounded-2xl border border-amber-100 bg-gradient-to-br from-amber-50 via-white to-white p-5 shadow-sm"},fe={class:"mt-3 text-3xl font-extrabold text-amber-700 md:text-4xl"},_e={class:"rounded-2xl border border-sky-100 bg-gradient-to-br from-sky-50 via-white to-white p-5 shadow-sm"},we={class:"mt-3 text-3xl font-extrabold text-sky-700 md:text-4xl"},ve={class:"rounded-2xl border border-emerald-100 bg-gradient-to-br from-emerald-50 via-white to-white p-5 shadow-sm"},ke={class:"mt-3 flex items-baseline gap-2"},Ce={class:"text-3xl font-extrabold text-emerald-700 md:text-4xl"},je={class:"text-xs font-medium text-emerald-600"},Se={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Te={class:"rounded-3xl border border-gray-100 bg-gradient-to-br from-white via-white to-gray-50 p-6 shadow-sm"},Be={class:"mt-5 grid grid-cols-1 gap-6 text-sm text-gray-600 sm:grid-cols-2"},Ee={class:"space-y-2 rounded-2xl border border-gray-100 bg-white/70 p-4"},Le={class:"space-y-2 rounded-2xl border border-gray-100 bg-white/70 p-4"},Re={class:"inline-flex items-center rounded-full border border-blue-100 bg-blue-50 px-3 py-1 text-xs font-semibold text-blue-600"},Ne={class:"sm:col-span-2 space-y-2 rounded-2xl border border-gray-100 bg-white/70 p-4"},Ae={class:"mt-2 flex flex-wrap gap-2"},De={key:0,class:"text-xs text-gray-400"},Me={class:"sm:col-span-2 space-y-2 rounded-2xl border border-gray-100 bg-white/70 p-4"},Ve={key:0,class:"rounded-2xl border border-amber-100 bg-amber-50/60 p-4 text-sm text-amber-700"},ze={key:1,class:"rounded-2xl border border-gray-100 bg-gray-50/70 p-4 text-sm text-gray-500"},Ue={class:"rounded-2xl border border-gray-100 bg-white/80 p-5 shadow-sm"},Fe={class:"mt-4 divide-y divide-gray-100"},Ie={class:"space-y-1"},Oe={class:"text-sm font-semibold text-gray-900"},Pe={key:0,class:"text-xs text-gray-500"},$e={key:1,class:"text-xs text-gray-500"},Je={key:2,class:"text-xs text-gray-500"},qe={key:0,class:"badge badge-success"},Ge={key:0,class:"py-10 text-center text-sm text-gray-500"},He={class:"rounded-2xl border border-gray-100 bg-white/80 p-5 shadow-sm"},Ke={class:"flex items-center justify-between"},Qe={class:"inline-flex items-center rounded-full bg-primary-50 px-3 py-1 text-xs font-medium text-primary-600"},We={class:"mt-4 overflow-x-auto rounded-2xl border border-gray-100"},Xe={class:"min-w-full divide-y divide-gray-100 text-sm"},Ye={class:"divide-y divide-gray-100 bg-white"},Ze={class:"px-4 py-3 text-sm text-gray-900"},et={class:"px-4 py-3 text-sm text-gray-700"},tt={class:"px-4 py-3"},st={class:"badge"},rt={class:"px-4 py-3 text-sm text-gray-500"},dt={key:0},ct={__name:"CustomerDetails",setup(at){const q=Y(),c=ee(),G=m(()=>c.loading),o=m(()=>c.selectedCustomer),l=m(()=>c.insights),H=i=>te[i]||"نامشخص",K=i=>se[i]||"استاندارد";return(async()=>{const i=q.params.id;i&&(await c.fetchCustomer(i),await c.fetchCustomerInsights(i))})(),(i,t)=>{var p,b;const Q=W("router-link");return a(),r("div",re,[e("section",de,[e("div",ae,[t[0]||(t[0]=e("p",{class:"text-xs font-semibold uppercase tracking-widest text-primary-500"},"جزئیات مشتری",-1)),e("h1",oe,d(((p=o.value)==null?void 0:p.name)||"جزئیات مشتری"),1),e("p",le,d(((b=o.value)==null?void 0:b.companyName)||"اطلاعات سازمان در دسترس نیست"),1)]),e("div",ie,[$(Q,{to:"/admin/customers",class:"btn btn-light"},{default:J(()=>[...t[1]||(t[1]=[x("بازگشت به فهرست",-1)])]),_:1}),o.value?(a(),r("span",ne," کد مشتری: "+d(o.value.code||"—"),1)):n("",!0)])]),$(X,{name:"fade",mode:"out-in"},{default:J(()=>{var y,h,f,_,w,v,k,C,j,S,T,B,E,L,R,N,A,D,M,V,z,U,F,I,O,P;return[G.value?(a(),r("div",ce,[t[5]||(t[5]=e("div",{class:"animate-pulse rounded-2xl border border-gray-100 bg-white/80 p-6 shadow-sm space-y-3"},[e("div",{class:"h-4 w-1/4 rounded bg-gray-200"}),e("div",{class:"h-3 w-1/3 rounded bg-gray-200"}),e("div",{class:"flex gap-3"},[e("div",{class:"h-3 w-20 rounded bg-gray-200"}),e("div",{class:"h-3 w-24 rounded bg-gray-200"})])],-1)),e("div",xe,[(a(),r(g,null,u(4,s=>e("div",{key:`summary-skeleton-${s}`,class:"animate-pulse rounded-2xl border border-gray-100 bg-gray-50/60 p-5"},[...t[2]||(t[2]=[e("div",{class:"h-3 w-16 rounded bg-gray-200"},null,-1),e("div",{class:"mt-3 h-6 w-24 rounded bg-gray-200"},null,-1)])])),64))]),e("div",ge,[t[4]||(t[4]=e("div",{class:"animate-pulse space-y-3 rounded-2xl border border-gray-100 bg-white/80 p-5"},[e("div",{class:"h-4 w-1/3 rounded bg-gray-200"}),e("div",{class:"h-3 w-full rounded bg-gray-200"}),e("div",{class:"h-3 w-5/6 rounded bg-gray-200"}),e("div",{class:"h-3 w-2/3 rounded bg-gray-200"})],-1)),e("div",ue,[t[3]||(t[3]=e("div",{class:"h-4 w-1/3 rounded bg-gray-200"},null,-1)),(a(),r(g,null,u(3,s=>e("div",{key:`contact-skeleton-${s}`,class:"h-3 w-full rounded bg-gray-200"})),64))])]),t[6]||(t[6]=e("div",{class:"animate-pulse rounded-2xl border border-gray-100 bg-white/80 p-5 shadow-sm space-y-3"},[e("div",{class:"h-4 w-1/4 rounded bg-gray-200"}),e("div",{class:"h-3 w-full rounded bg-gray-200"}),e("div",{class:"h-3 w-4/5 rounded bg-gray-200"}),e("div",{class:"h-3 w-1/2 rounded bg-gray-200"})],-1))])):(a(),r("div",me,[e("section",pe,[e("article",be,[t[7]||(t[7]=e("p",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"کل درخواست‌ها",-1)),e("p",ye,d(((h=(y=l.value)==null?void 0:y.summary)==null?void 0:h.total)||0),1)]),e("article",he,[t[8]||(t[8]=e("p",{class:"text-xs font-semibold uppercase tracking-wide text-amber-600"},"باز",-1)),e("p",fe,d(((_=(f=l.value)==null?void 0:f.summary)==null?void 0:_.open)||0),1)]),e("article",_e,[t[9]||(t[9]=e("p",{class:"text-xs font-semibold uppercase tracking-wide text-sky-600"},"در حال اقدام",-1)),e("p",we,d(((v=(w=l.value)==null?void 0:w.summary)==null?void 0:v.inProgress)||0),1)]),e("article",ve,[t[10]||(t[10]=e("p",{class:"text-xs font-semibold uppercase tracking-wide text-emerald-600"},"انجام شده",-1)),e("div",ke,[e("p",Ce,d(((C=(k=l.value)==null?void 0:k.summary)==null?void 0:C.completed)||0),1),e("span",je,d(((S=(j=l.value)==null?void 0:j.summary)==null?void 0:S.completionRate)||0)+"%",1)])])]),e("section",Se,[e("article",Te,[t[15]||(t[15]=e("div",{class:"flex items-center justify-between"},[e("h2",{class:"text-lg font-semibold text-gray-900 md:text-xl"},"اطلاعات مشتری"),e("span",{class:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-primary-50 text-primary-600"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-lineJoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 11a3 3 0 10-6 0 3 3 0 006 0z"})])])],-1)),e("dl",Be,[e("div",Ee,[t[11]||(t[11]=e("dt",{class:"flex items-center gap-2 text-xs font-semibold text-gray-500 uppercase tracking-wide"},[e("span",{class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-emerald-50 text-emerald-600"},"و"),x(" وضعیت همکاری ")],-1)),e("dd",null,[e("span",{class:Z(["badge",((T=o.value)==null?void 0:T.status)==="active"?"badge-success":((B=o.value)==null?void 0:B.status)==="prospect"?"badge-warning":"badge-secondary"])},d(H((E=o.value)==null?void 0:E.status)),3)])]),e("div",Le,[t[12]||(t[12]=e("dt",{class:"flex items-center gap-2 text-xs font-semibold text-gray-500 uppercase tracking-wide"},[e("span",{class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-blue-50 text-blue-600"},"س"),x(" سطح خدمات ")],-1)),e("dd",null,[e("span",Re,d(K((L=o.value)==null?void 0:L.tier)),1)])]),e("div",Ne,[t[13]||(t[13]=e("dt",{class:"flex items-center gap-2 text-xs font-semibold text-gray-500 uppercase tracking-wide"},[e("span",{class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-purple-50 text-purple-600"},"ب"),x(" برچسب‌ها ")],-1)),e("dd",Ae,[(a(!0),r(g,null,u(((R=o.value)==null?void 0:R.tags)||[],s=>(a(),r("span",{key:s,class:"inline-flex items-center rounded-full border border-purple-100 bg-purple-50 px-3 py-1 text-xs font-medium text-purple-600"},d(s),1))),128)),(A=(N=o.value)==null?void 0:N.tags)!=null&&A.length?n("",!0):(a(),r("span",De,"برچسبی ثبت نشده است"))])]),e("div",Me,[t[14]||(t[14]=e("dt",{class:"flex items-center gap-2 text-xs font-semibold text-gray-500 uppercase tracking-wide"},[e("span",{class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-amber-50 text-amber-600"},"ی"),x(" یادداشت‌ها ")],-1)),(D=o.value)!=null&&D.notes?(a(),r("dd",Ve,d(o.value.notes),1)):(a(),r("dd",ze," یادداشتی ثبت نشده است. "))])])]),e("article",Ue,[t[16]||(t[16]=e("h2",{class:"text-lg font-semibold text-gray-900 md:text-xl"},"مخاطبین",-1)),e("ul",Fe,[(a(!0),r(g,null,u(((M=o.value)==null?void 0:M.contacts)||[],s=>(a(),r("li",{key:s._id,class:"flex items-start justify-between gap-3 py-4"},[e("div",Ie,[e("p",Oe,d(s.name||"نامشخص"),1),s.position?(a(),r("p",Pe,d(s.position),1)):n("",!0),s.email?(a(),r("p",$e,d(s.email),1)):n("",!0),s.phone?(a(),r("p",Je,d(s.phone),1)):n("",!0)]),s.isPrimary?(a(),r("span",qe,"مخاطب اصلی")):n("",!0)]))),128)),(z=(V=o.value)==null?void 0:V.contacts)!=null&&z.length?n("",!0):(a(),r("li",Ge," مخاطبی ثبت نشده است. "))])])]),e("section",He,[e("div",Ke,[t[17]||(t[17]=e("h2",{class:"text-lg font-semibold text-gray-900 md:text-xl"},"آخرین درخواست‌ها",-1)),e("span",Qe,d(((F=(U=l.value)==null?void 0:U.summary)==null?void 0:F.total)||0)+" مورد ",1)]),e("div",We,[e("table",Xe,[t[19]||(t[19]=e("thead",{class:"bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("tr",null,[e("th",{class:"px-4 py-3 text-right"},"موضوع"),e("th",{class:"px-4 py-3 text-right"},"سیستم"),e("th",{class:"px-4 py-3 text-right"},"وضعیت"),e("th",{class:"px-4 py-3 text-right"},"تاریخ")])],-1)),e("tbody",Ye,[(a(!0),r(g,null,u(((I=l.value)==null?void 0:I.recentRequests)||[],s=>(a(),r("tr",{key:s._id,class:"transition hover:bg-gray-50"},[e("td",Ze,d(s.request),1),e("td",et,d(s.system),1),e("td",tt,[e("span",st,d(s.status),1)]),e("td",rt,d(s.date),1)]))),128)),(P=(O=l.value)==null?void 0:O.recentRequests)!=null&&P.length?n("",!0):(a(),r("tr",dt,[...t[18]||(t[18]=[e("td",{colspan:"4",class:"px-4 py-10 text-center text-sm text-gray-500"}," درخواستی برای این مشتری ثبت نشده است. ",-1)])]))])])])])]))]}),_:1})])}}};export{ct as default};

import{A as E,r as m,c as i,j as y,o as n,a as t,h as V,t as w,w as _,f as j,I,F as N,p as H,y as A,J as ot,u as rt,k as lt,l as at,d as Z,e as tt,B as nt,C as it,b as dt,m as ut,i as ct,K as pt,q as et}from"./index-NaxcUE6C.js";import{u as gt}from"./requests-DO-BLg5z.js";import{r as F}from"./reportService-BCSXA11K.js";import{a as vt,P as xt}from"./constants-CjjkXsVG.js";import{d as st}from"./dateUtils-B4onfrge.js";import{S as M}from"./sweetalert2.esm.all-ePrzfkxH.js";import{u as yt}from"./users-BxaSixr-.js";const mt={formatFileSize(r){if(r===0)return"0 Bytes";const p=1024,c=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(r)/Math.log(p));return Math.round(r/Math.pow(p,g)*100)/100+" "+c[g]},debounce(r,p){let c;return function(...T){const b=()=>{clearTimeout(c),r(...T)};clearTimeout(c),c=setTimeout(b,p)}},clone(r){return JSON.parse(JSON.stringify(r))},isEmpty(r){return Object.keys(r).length===0},generateId(){return Math.random().toString(36).substring(2,9)},showToast(r,p="info"){console.log(`[${p}] ${r}`)},isPersian(r){return/^[\u0600-\u06FF\s]+$/.test(r)},truncate(r,p=50){return r.length<=p?r:r.substring(0,p)+"..."}},ft={key:0,class:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg p-4 z-50 md:relative md:shadow-none md:border-0 md:p-0 md:mb-4"},bt={class:"container mx-auto flex flex-col md:flex-row items-center justify-between gap-4"},kt={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},wt={class:"font-bold text-primary-600 dark:text-primary-400"},ht={class:"flex flex-wrap gap-2 w-full md:w-auto justify-center"},Ct=["disabled"],$t=["disabled"],Bt=["disabled"],St=["disabled"],Vt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},jt=["value"],Mt={class:"flex gap-2 justify-end"},It=["disabled"],Tt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},zt={class:"flex gap-2 justify-end"},Et=["disabled"],Rt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},Ut={class:"flex gap-2 justify-end"},Pt=["disabled"],qt={__name:"BulkActions",props:{selectedIds:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["bulk-updated","clear-selection"],setup(r,{emit:p}){const c=r,g=p,T=yt(),{success:b,error:x}=ot(),h=E(()=>c.selectedIds.length),k=E(()=>T.users.filter(u=>u.role==="admin"||u.role==="user")),d=m(!1),v=m(!1),f=m(!1),C=m(""),$=m("باز"),B=m("متوسط"),S=m(!1),R=async()=>{var u,s;if(C.value){S.value=!0;try{await A.post("/requests/bulk/assign",{requestIds:c.selectedIds,userId:C.value}),b(`${c.selectedIds.length} درخواست با موفقیت اختصاص داده شد`),d.value=!1,C.value="",g("bulk-updated")}catch(l){x(((s=(u=l.response)==null?void 0:u.data)==null?void 0:s.message)||"خطا در اختصاص درخواست‌ها")}finally{S.value=!1}}},U=async()=>{var u,s;if($.value){S.value=!0;try{await A.post("/requests/bulk/status",{requestIds:c.selectedIds,status:$.value}),b(`${c.selectedIds.length} درخواست با موفقیت به‌روزرسانی شد`),v.value=!1,$.value="باز",g("bulk-updated")}catch(l){x(((s=(u=l.response)==null?void 0:u.data)==null?void 0:s.message)||"خطا در به‌روزرسانی وضعیت")}finally{S.value=!1}}},P=async()=>{var u,s;if(B.value){S.value=!0;try{await A.post("/requests/bulk/priority",{requestIds:c.selectedIds,priority:B.value}),b(`${c.selectedIds.length} درخواست با موفقیت به‌روزرسانی شد`),f.value=!1,B.value="متوسط",g("bulk-updated")}catch(l){x(((s=(u=l.response)==null?void 0:u.data)==null?void 0:s.message)||"خطا در به‌روزرسانی اولویت")}finally{S.value=!1}}},q=()=>{const u=new URLSearchParams;c.selectedIds.forEach(s=>{u.append("ids",s)}),window.location.href=`/api/requests/export/excel?${u.toString()}`},z=()=>{g("clear-selection")};return(u,s)=>h.value>0?(n(),i("div",ft,[t("div",bt,[t("div",kt,[t("span",wt,w(h.value),1),s[12]||(s[12]=V(" درخواست انتخاب شده ",-1))]),t("div",ht,[t("button",{onClick:s[0]||(s[0]=l=>d.value=!0),class:"btn btn-secondary text-sm px-3 py-2",disabled:r.loading},[...s[13]||(s[13]=[t("svg",{class:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1),V(" اختصاص ",-1)])],8,Ct),t("button",{onClick:s[1]||(s[1]=l=>v.value=!0),class:"btn btn-secondary text-sm px-3 py-2",disabled:r.loading},[...s[14]||(s[14]=[t("svg",{class:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),V(" تغییر وضعیت ",-1)])],8,$t),t("button",{onClick:s[2]||(s[2]=l=>f.value=!0),class:"btn btn-secondary text-sm px-3 py-2",disabled:r.loading},[...s[15]||(s[15]=[t("svg",{class:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),V(" تغییر اولویت ",-1)])],8,Bt),t("button",{onClick:q,class:"btn btn-secondary text-sm px-3 py-2",disabled:r.loading},[...s[16]||(s[16]=[t("svg",{class:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),V(" خروجی ",-1)])],8,St),t("button",{onClick:z,class:"btn btn-ghost text-sm px-3 py-2"}," لغو انتخاب ")])]),d.value?(n(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",onClick:s[5]||(s[5]=_(l=>d.value=!1,["self"]))},[t("div",Vt,[s[18]||(s[18]=t("h3",{class:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100"},"اختصاص به",-1)),j(t("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>C.value=l),class:"input mb-4"},[s[17]||(s[17]=t("option",{value:""},"انتخاب کاربر",-1)),(n(!0),i(N,null,H(k.value,l=>(n(),i("option",{key:l._id,value:l._id},w(l.name),9,jt))),128))],512),[[I,C.value]]),t("div",Mt,[t("button",{onClick:s[4]||(s[4]=l=>d.value=!1),class:"btn btn-secondary"},"انصراف"),t("button",{onClick:R,class:"btn btn-primary",disabled:!C.value||r.loading}," اختصاص ",8,It)])])])):y("",!0),v.value?(n(),i("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",onClick:s[8]||(s[8]=_(l=>v.value=!1,["self"]))},[t("div",Tt,[s[20]||(s[20]=t("h3",{class:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100"},"تغییر وضعیت",-1)),j(t("select",{"onUpdate:modelValue":s[6]||(s[6]=l=>$.value=l),class:"input mb-4"},[...s[19]||(s[19]=[t("option",{value:"باز"},"باز",-1),t("option",{value:"در درست اقدام"},"در درست اقدام",-1),t("option",{value:"انجام"},"انجام",-1)])],512),[[I,$.value]]),t("div",zt,[t("button",{onClick:s[7]||(s[7]=l=>v.value=!1),class:"btn btn-secondary"},"انصراف"),t("button",{onClick:U,class:"btn btn-primary",disabled:!$.value||r.loading}," اعمال ",8,Et)])])])):y("",!0),f.value?(n(),i("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",onClick:s[11]||(s[11]=_(l=>f.value=!1,["self"]))},[t("div",Rt,[s[22]||(s[22]=t("h3",{class:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100"},"تغییر اولویت",-1)),j(t("select",{"onUpdate:modelValue":s[9]||(s[9]=l=>B.value=l),class:"input mb-4"},[...s[21]||(s[21]=[t("option",{value:"کم"},"کم",-1),t("option",{value:"متوسط"},"متوسط",-1),t("option",{value:"زیاد"},"زیاد",-1),t("option",{value:"فوری"},"فوری",-1)])],512),[[I,B.value]]),t("div",Ut,[t("button",{onClick:s[10]||(s[10]=l=>f.value=!1),class:"btn btn-secondary"},"انصراف"),t("button",{onClick:P,class:"btn btn-primary",disabled:!B.value||r.loading}," اعمال ",8,Pt)])])])):y("",!0)])):y("",!0)}},Dt={class:"mb-6 flex justify-between items-center"},_t={class:"flex gap-3"},At={key:0,class:"relative"},Ft={key:0,class:"absolute left-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-10 border border-gray-200"},Nt={class:"card mb-6"},Ht={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Lt=["value"],Ot={class:"card"},Yt={key:0,class:"text-center py-8"},Jt={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Kt={key:2},Gt={class:"overflow-x-auto"},Qt={class:"min-w-full"},Wt={class:"bg-gray-50 dark:bg-gray-800"},Xt={key:0,class:"px-4 py-3 text-right"},Zt=["checked"],te={key:1,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},ee={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},se={key:0,class:"px-4 py-4"},oe=["value"],re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ae={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ne=["href"],ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},de={class:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100"},ue={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap text-sm"},ge=["onClick"],we={__name:"Requests",setup(r){const p=ct(),c=rt(),g=gt(),{success:T}=ot(),b=m(!1),x=m(!1),h=m(!1),k=m([]),d=m({status:"",system:"",priority:""}),v=E(()=>c.user);E(()=>g.requests);const f=E(()=>g.filteredRequests),C=()=>{g.setFilters(d.value)},$=o=>{o.target.checked?k.value=f.value.map(e=>e._id):k.value=[]},B=()=>{k.value=[],g.fetchRequests(),T("عملیات با موفقیت انجام شد")},S=o=>({باز:"badge badge-info","در درست اقدام":"badge badge-warning",انجام:"badge badge-success"})[o]||"badge badge-secondary",R=o=>{const e=xt;return{[e.کم||"green"]:"badge badge-success",[e.متوسط||"yellow"]:"badge badge-warning",[e.زیاد||"orange"]:"badge badge-info",[e.فوری||"red"]:"badge badge-danger"}[o]||"badge badge-secondary"},U=o=>{if(!o)return"";if(typeof o=="string"&&(/^\d{4}-\d{2}-\d{2}$/.test(o)||/^\d{4}\/\d{2}\/\d{2}$/.test(o))){const e=o.includes("-")?o:o.replace(/\//g,"-");return st.gregorianToJalali(e)}return st.formatDate(o,"jYYYY/jMM/jDD")},P=(o,e)=>mt.truncate(o,e),q=o=>{p.push(`/requests/${o._id}`)},z=()=>{const o={};return d.value.status&&(o.status=d.value.status),d.value.system&&(o.system=d.value.system),d.value.priority&&(o.priority=d.value.priority),o},u=async()=>{x.value=!1,h.value=!0;try{const o=z();await F.exportToExcel(o),await M.fire({icon:"success",title:"موفقیت‌آمیز!",text:"فایل Excel با موفقیت دانلود شد.",confirmButtonText:"باشه",confirmButtonColor:"#3085d6"})}catch(o){console.error("Export error:",o),await M.fire({icon:"error",title:"خطا!",text:"خطا در خروجی گرفتن فایل Excel",confirmButtonText:"باشه",confirmButtonColor:"#d33"})}finally{h.value=!1}},s=async()=>{x.value=!1,h.value=!0;try{const o=z();await F.exportToCSV(o),await M.fire({icon:"success",title:"موفقیت‌آمیز!",text:"فایل CSV با موفقیت دانلود شد.",confirmButtonText:"باشه",confirmButtonColor:"#3085d6"})}catch(o){console.error("Export error:",o),await M.fire({icon:"error",title:"خطا!",text:"خطا در خروجی گرفتن فایل CSV",confirmButtonText:"باشه",confirmButtonColor:"#d33"})}finally{h.value=!1}},l=async()=>{x.value=!1,h.value=!0;try{const o=z();await F.exportAdvancedReport(o),await M.fire({icon:"success",title:"موفقیت‌آمیز!",text:"گزارش پیشرفته با موفقیت دانلود شد.",confirmButtonText:"باشه",confirmButtonColor:"#3085d6"})}catch(o){console.error("Export error:",o),await M.fire({icon:"error",title:"خطا!",text:"خطا در خروجی گرفتن گزارش پیشرفته",confirmButtonText:"باشه",confirmButtonColor:"#d33"})}finally{h.value=!1}},L=o=>{x.value&&!o.target.closest(".relative")&&(x.value=!1)};return lt(async()=>{b.value=!0;try{await g.fetchRequests()}finally{b.value=!1}document.addEventListener("click",L)}),at(()=>{document.removeEventListener("click",L)}),(o,e)=>{var O,Y,J,K;const D=nt("router-link");return n(),i("div",null,[t("div",Dt,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"درخواست‌ها"),t("p",{class:"text-gray-600 mt-2"},"مدیریت و پیگیری درخواست‌ها")],-1)),t("div",_t,[((O=v.value)==null?void 0:O.role)!=="customer"?(n(),i("div",At,[t("button",{onClick:e[0]||(e[0]=a=>x.value=!x.value),class:"btn btn-secondary"},[...e[6]||(e[6]=[t("svg",{class:"w-5 h-5 inline ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),V(" خروجی ",-1)])]),x.value?(n(),i("div",Ft,[t("button",{onClick:u,class:"w-full text-right px-4 py-2 hover:bg-gray-100 flex items-center justify-between"},[...e[7]||(e[7]=[t("span",null,"خروجی Excel",-1),t("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]),t("button",{onClick:s,class:"w-full text-right px-4 py-2 hover:bg-gray-100 flex items-center justify-between border-t border-gray-200"},[...e[8]||(e[8]=[t("span",null,"خروجی CSV",-1),t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]),t("button",{onClick:l,class:"w-full text-right px-4 py-2 hover:bg-gray-100 flex items-center justify-between border-t border-gray-200"},[...e[9]||(e[9]=[t("span",null,"گزارش پیشرفته",-1),t("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])])])):y("",!0)])):y("",!0),Z(D,{to:"/requests/create",class:"btn btn-primary"},{default:tt(()=>[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5 inline ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" درخواست جدید ",-1)])]),_:1})])]),t("div",Nt,[e[18]||(e[18]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"فیلترها",-1)),t("div",Ht,[t("div",null,[e[13]||(e[13]=t("label",{class:"label"},"وضعیت",-1)),j(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.status=a),class:"input"},[...e[12]||(e[12]=[t("option",{value:""},"همه",-1),t("option",{value:"باز"},"باز",-1),t("option",{value:"در درست اقدام"},"در درست اقدام",-1),t("option",{value:"انجام"},"انجام",-1)])],512),[[I,d.value.status]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"label"},"سیستم",-1)),j(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.system=a),class:"input"},[e[14]||(e[14]=t("option",{value:""},"همه",-1)),(n(!0),i(N,null,H(it(vt),a=>(n(),i("option",{key:a,value:a},w(a),9,Lt))),128))],512),[[I,d.value.system]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"label"},"اولویت",-1)),j(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>d.value.priority=a),class:"input"},[...e[16]||(e[16]=[dt('<option value="">همه</option><option value="کم">کم</option><option value="متوسط">متوسط</option><option value="زیاد">زیاد</option><option value="فوری">فوری</option>',5)])],512),[[I,d.value.priority]])]),t("div",{class:"flex items-end"},[t("button",{onClick:C,class:"btn btn-primary w-full"},"اعمال فیلتر")])])]),t("div",Ot,[b.value?(n(),i("div",Yt,[...e[19]||(e[19]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):f.value.length===0?(n(),i("div",Jt," درخواستی یافت نشد ")):(n(),i("div",Kt,[((Y=v.value)==null?void 0:Y.role)!=="customer"?(n(),ut(qt,{key:0,"selected-ids":k.value,loading:b.value,onBulkUpdated:B,onClearSelection:e[4]||(e[4]=a=>k.value=[])},null,8,["selected-ids","loading"])):y("",!0),t("div",Gt,[t("table",Qt,[t("thead",Wt,[t("tr",null,[((J=v.value)==null?void 0:J.role)!=="customer"?(n(),i("th",Xt,[t("input",{type:"checkbox",checked:k.value.length===f.value.length&&f.value.length>0,onChange:$,class:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"},null,40,Zt)])):y("",!0),e[20]||(e[20]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"تاریخ",-1)),e[21]||(e[21]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"مشتری",-1)),((K=v.value)==null?void 0:K.role)!=="customer"?(n(),i("th",te,"تماس")):y("",!0),e[22]||(e[22]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"سیستم",-1)),e[23]||(e[23]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"درخواست",-1)),e[24]||(e[24]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"وضعیت",-1)),e[25]||(e[25]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"اولویت",-1)),e[26]||(e[26]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"عملیات",-1))])]),t("tbody",ee,[(n(!0),i(N,null,H(f.value,a=>{var G,Q,W;return n(),i("tr",{key:a._id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[((G=v.value)==null?void 0:G.role)!=="customer"?(n(),i("td",se,[j(t("input",{type:"checkbox",value:a._id,"onUpdate:modelValue":e[5]||(e[5]=X=>k.value=X),class:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,8,oe),[[pt,k.value]])])):y("",!0),t("td",re,w(U(a.date)),1),t("td",le,w(a.customerName),1),((Q=v.value)==null?void 0:Q.role)!=="customer"?(n(),i("td",ae,[t("a",{href:`tel:${a.customerPhone}`,class:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},w(a.customerPhone),9,ne)])):y("",!0),t("td",ie,w(a.system),1),t("td",de,w(P(a.request,50)),1),t("td",ue,[t("span",{class:et(S(a.status))},w(a.status),3)]),t("td",ce,[t("span",{class:et(R(a.priority))},w(a.priority),3)]),t("td",pe,[Z(D,{to:`/requests/${a._id}`,class:"text-primary-600 dark:text-primary-400 hover:text-primary-900 dark:hover:text-primary-300 ml-4"},{default:tt(()=>[...e[27]||(e[27]=[V(" مشاهده ",-1)])]),_:1},8,["to"]),((W=v.value)==null?void 0:W.role)==="admin"?(n(),i("button",{key:0,onClick:X=>q(a),class:"text-yellow-600 dark:text-yellow-400 hover:text-yellow-900 dark:hover:text-yellow-300 mr-4"}," ویرایش ",8,ge)):y("",!0)])])}),128))])])])]))])])}}};export{we as default};

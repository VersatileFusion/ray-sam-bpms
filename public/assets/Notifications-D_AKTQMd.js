import{u as h}from"./notifications-CvwSNUEb.js";import{d as k}from"./dateUtils-KBV2qcdl.js";import{B as u,r as p,k as g,c as a,a as e,j as c,F as b,p as w,o,q as C,t as d}from"./index-B1RxePN7.js";const j={class:"mb-6 flex justify-between items-center"},A={class:"card"},N={key:0,class:"text-center py-20"},B={key:1,class:"text-center py-20 text-gray-500"},H={key:2,class:"divide-y divide-gray-200"},M={class:"flex-1"},D={class:"flex items-start justify-between"},E={class:"font-medium text-gray-900"},R={class:"text-sm text-gray-600 mt-1"},V={class:"flex items-center space-x-2 space-x-reverse"},Y={key:0,class:"w-2 h-2 bg-blue-600 rounded-full"},S={class:"text-xs text-gray-500"},F={class:"flex items-center space-x-2 space-x-reverse mr-4"},L=["onClick"],$=["onClick"],q={computed:u},I=Object.assign(q,{__name:"Notifications",setup(z){const l=h(),n=p(!1),i=u(()=>l.notifications),m=u(()=>l.unreadCount),v=async s=>{try{await l.markAsRead(s)}catch(t){console.error("Error marking as read:",t)}},_=async()=>{n.value=!0;try{await l.markAllAsRead()}catch(s){console.error("Error marking all as read:",s)}finally{n.value=!1}},x=async s=>{try{await l.deleteNotification(s)}catch(t){console.error("Error deleting notification:",t)}},y=s=>s?k.formatDate(s,"jYYYY/jMM/jDD HH:mm"):"";return g(async()=>{n.value=!0;try{await l.fetchNotifications()}finally{n.value=!1}}),(s,t)=>(o(),a("div",null,[e("div",j,[t[0]||(t[0]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"اعلان‌ها"),e("p",{class:"text-gray-600 mt-2"},"پیام‌ها و هشدارهای شما")],-1)),i.value.length>0&&m.value>0?(o(),a("button",{key:0,onClick:_,class:"btn btn-secondary"}," همه را خوانده شده علامت بزن ")):c("",!0)]),e("div",A,[n.value?(o(),a("div",N,[...t[1]||(t[1]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"},null,-1)])])):i.value.length===0?(o(),a("div",B,[...t[2]||(t[2]=[e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("p",null,"اعلانی موجود نیست",-1)])])):(o(),a("div",H,[(o(!0),a(b,null,w(i.value,r=>(o(),a("div",{key:r._id,class:C(["flex items-start p-4 hover:bg-gray-50 transition-colors",{"bg-blue-50":!r.read}])},[e("div",M,[e("div",D,[e("div",null,[e("h3",E,d(r.title),1),e("p",R,d(r.message),1)]),e("div",V,[r.read?c("",!0):(o(),a("span",Y)),e("span",S,d(y(r.createdAt)),1)])])]),e("div",F,[r.read?c("",!0):(o(),a("button",{key:0,onClick:f=>v(r._id),class:"text-blue-600 hover:text-blue-900 text-sm"}," علامت خوانده شده ",8,L)),e("button",{onClick:f=>x(r._id),class:"text-red-600 hover:text-red-900"},[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,$)])],2))),128))]))])]))}});export{I as default};

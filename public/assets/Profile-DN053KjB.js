import{u as k,r as i,B as S,c as v,a as e,t as o,w as V,j as w,f as b,v as c,h as B,o as p}from"./index-B1RxePN7.js";import{e as L}from"./constants-CFvVWKro.js";const _={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},E={class:"card"},q={class:"space-y-4"},N={class:"text-gray-900 font-medium"},U={class:"text-gray-900 font-medium"},A={class:"text-gray-900 font-medium"},C={class:"card"},D={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4"},M={key:1,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4"},R={class:"space-y-4"},T=["disabled"],j={key:0,class:"mr-2"},z={__name:"Profile",setup(F){const g=k(),d=i(!1),r=i(""),n=i(""),t=i({currentPassword:"",newPassword:"",confirmPassword:""}),m=S(()=>g.user),y=a=>L[a]||a,P=async()=>{var a,s;if(r.value="",n.value="",t.value.newPassword!==t.value.confirmPassword){r.value="رمز عبور جدید و تکرار آن مطابقت ندارد";return}if(t.value.newPassword.length<6){r.value="رمز عبور باید حداقل 6 کاراکتر باشد";return}d.value=!0;try{await g.changePassword({currentPassword:t.value.currentPassword,newPassword:t.value.newPassword}),n.value="رمز عبور با موفقیت تغییر کرد",t.value={currentPassword:"",newPassword:"",confirmPassword:""}}catch(u){r.value=((s=(a=u.response)==null?void 0:a.data)==null?void 0:s.message)||"خطا در تغییر رمز عبور"}finally{d.value=!1}};return(a,s)=>{var u,f,x;return p(),v("div",null,[s[13]||(s[13]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"پروفایل کاربری"),e("p",{class:"text-gray-600 mt-2"},"مدیریت حساب کاربری")],-1)),e("div",_,[e("div",E,[s[6]||(s[6]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"اطلاعات کاربری",-1)),e("div",q,[e("div",null,[s[3]||(s[3]=e("label",{class:"text-sm text-gray-600"},"نام:",-1)),e("p",N,o((u=m.value)==null?void 0:u.name),1)]),e("div",null,[s[4]||(s[4]=e("label",{class:"text-sm text-gray-600"},"نام کاربری:",-1)),e("p",U,o((f=m.value)==null?void 0:f.username),1)]),e("div",null,[s[5]||(s[5]=e("label",{class:"text-sm text-gray-600"},"نقش:",-1)),e("p",A,o(y((x=m.value)==null?void 0:x.role)),1)])])]),e("div",C,[s[12]||(s[12]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"تغییر رمز عبور",-1)),e("form",{onSubmit:V(P,["prevent"])},[r.value?(p(),v("div",D,o(r.value),1)):w("",!0),n.value?(p(),v("div",M,o(n.value),1)):w("",!0),e("div",R,[e("div",null,[s[7]||(s[7]=e("label",{class:"label"},"رمز عبور فعلی",-1)),b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.value.currentPassword=l),type:"password",class:"input",required:""},null,512),[[c,t.value.currentPassword]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"label"},"رمز عبور جدید",-1)),b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.newPassword=l),type:"password",class:"input",required:""},null,512),[[c,t.value.newPassword]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"label"},"تکرار رمز عبور جدید",-1)),b(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.confirmPassword=l),type:"password",class:"input",required:""},null,512),[[c,t.value.confirmPassword]])]),e("button",{type:"submit",class:"btn btn-primary w-full",disabled:d.value},[d.value?(p(),v("span",j,[...s[10]||(s[10]=[e("span",{class:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)])])):w("",!0),s[11]||(s[11]=B(" تغییر رمز عبور ",-1))],8,T)])],32)])])])}}};export{z as default};

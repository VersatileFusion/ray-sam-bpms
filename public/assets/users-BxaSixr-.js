import{y as n,M as i}from"./index-NaxcUE6C.js";const o={async getUsers(){return(await n.get("/users")).data},async getUser(s){return(await n.get(`/users/${s}`)).data},async createUser(s){return(await n.post("/admin/users",s)).data},async updateUser(s,r){return(await n.put(`/admin/users/${s}`,r)).data},async deleteUser(s){return(await n.delete(`/admin/users/${s}`)).data},async resetPassword(s,r){return(await n.post(`/admin/users/${s}/reset-password`,{newPassword:r})).data}},u=i("users",{state:()=>({users:[],loading:!1,error:null}),actions:{async fetchUsers(){var s,r;this.loading=!0,this.error=null;try{const e=await o.getUsers();return e.success&&(this.users=e.users||[]),e}catch(e){throw this.error=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"خطا در دریافت کاربران",e}finally{this.loading=!1}},async createUser(s){var r,e;this.loading=!0,this.error=null;try{const t=await o.createUser(s);return t.success&&await this.fetchUsers(),t}catch(t){throw this.error=((e=(r=t.response)==null?void 0:r.data)==null?void 0:e.message)||"خطا در ایجاد کاربر",t}finally{this.loading=!1}},async updateUser(s,r){var e,t;this.loading=!0,this.error=null;try{const a=await o.updateUser(s,r);return a.success&&await this.fetchUsers(),a}catch(a){throw this.error=((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"خطا در ویرایش کاربر",a}finally{this.loading=!1}},async deleteUser(s){var r,e;this.loading=!0,this.error=null;try{const t=await o.deleteUser(s);return t.success&&await this.fetchUsers(),t}catch(t){throw this.error=((e=(r=t.response)==null?void 0:r.data)==null?void 0:e.message)||"خطا در حذف کاربر",t}finally{this.loading=!1}},async resetPassword(s,r){var e,t;try{return await o.resetPassword(s,r)}catch(a){throw this.error=((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"خطا در تغییر رمز عبور",a}}}});export{u};

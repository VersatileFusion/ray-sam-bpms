import{y as n,N as i}from"./index-B1RxePN7.js";const o={async getUsers(){return(await n.get("/users")).data},async getUser(e){return(await n.get(`/users/${e}`)).data},async createUser(e){return(await n.post("/admin/users",e)).data},async updateUser(e,r){return(await n.put(`/admin/users/${e}`,r)).data},async deleteUser(e){return(await n.delete(`/admin/users/${e}`)).data},async resetPassword(e,r){return(await n.post(`/admin/users/${e}/reset-password`,{newPassword:r})).data}},u=i("users",{state:()=>({users:[],loading:!1,error:null}),actions:{async fetchUsers(){var e,r,t;this.loading=!0,this.error=null;try{const s=await o.getUsers();return s.success?this.users=((e=s.data)==null?void 0:e.users)||[]:this.error=s.message||"خطا در دریافت کاربران",s}catch(s){throw this.error=((t=(r=s.response)==null?void 0:r.data)==null?void 0:t.message)||"خطا در دریافت کاربران",s}finally{this.loading=!1}},async createUser(e){var r,t;this.loading=!0,this.error=null;try{const s=await o.createUser(e);return s.success?await this.fetchUsers():this.error=s.message||"خطا در ایجاد کاربر",s}catch(s){throw this.error=((t=(r=s.response)==null?void 0:r.data)==null?void 0:t.message)||"خطا در ایجاد کاربر",s}finally{this.loading=!1}},async updateUser(e,r){var t,s;this.loading=!0,this.error=null;try{const a=await o.updateUser(e,r);return a.success?await this.fetchUsers():this.error=a.message||"خطا در ویرایش کاربر",a}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"خطا در ویرایش کاربر",a}finally{this.loading=!1}},async deleteUser(e){var r,t;this.loading=!0,this.error=null;try{const s=await o.deleteUser(e);return s.success?await this.fetchUsers():this.error=s.message||"خطا در حذف کاربر",s}catch(s){throw this.error=((t=(r=s.response)==null?void 0:r.data)==null?void 0:t.message)||"خطا در حذف کاربر",s}finally{this.loading=!1}},async resetPassword(e,r){var t,s;try{const a=await o.resetPassword(e,r);return a.success||(this.error=a.message||"خطا در تغییر رمز عبور"),a}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"خطا در تغییر رمز عبور",a}}}});export{u};
